<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
    Copyright (C) 2006-2025 Carnegie Mellon University
    See license information in LICENSE.txt.
-->
<!--
    @DISTRIBUTION_STATEMENT_BEGIN@
    YAF 2.16
    Copyright 2024 Carnegie Mellon University.
    NO WARRANTY. THIS CARNEGIE MELLON UNIVERSITY AND SOFTWARE ENGINEERING
    INSTITUTE MATERIAL IS FURNISHED ON AN "AS-IS" BASIS. CARNEGIE MELLON
    UNIVERSITY MAKES NO WARRANTIES OF ANY KIND, EITHER EXPRESSED OR IMPLIED,
    AS TO ANY MATTER INCLUDING, BUT NOT LIMITED TO, WARRANTY OF FITNESS FOR
    PURPOSE OR MERCHANTABILITY, EXCLUSIVITY, OR RESULTS OBTAINED FROM USE OF
    THE MATERIAL. CARNEGIE MELLON UNIVERSITY DOES NOT MAKE ANY WARRANTY OF
    ANY KIND WITH RESPECT TO FREEDOM FROM PATENT, TRADEMARK, OR COPYRIGHT
    INFRINGEMENT.
    Licensed under a GNU GPL 2.0-style license, please see LICENSE.txt or
    contact permission@sei.cmu.edu for full terms.
    [DISTRIBUTION STATEMENT A] This material has been approved for public
    release and unlimited distribution.  Please see Copyright notice for
    non-US Government use and distribution.
    This Software includes and/or makes use of Third-Party Software each
    subject to its own license.
    DM24-1063
    @DISTRIBUTION_STATEMENT_END@
-->
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YAF: Explanation of YAF services</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Tutorials</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Explanation of YAF services</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_yaf-2_816_84_2doc_2howto_2yaf__service"></a></p>
<p>This page explains the service features included with YAF.</p>
<ul>
<li><a class="el" href="#systemd">systemd</a><ul>
<li><a class="el" href="#instantiated_services">Instantiated Services</a></li>
</ul>
</li>
<li><a class="el" href="#init_d">init.d</a></li>
</ul>
<h1><a class="anchor" id="systemd"></a><a href="#systemd">
systemd</a></h1>
<p>On systems that support it, systemd is an option for managing yaf services (as of YAF 2.16.0). The implementation of yaf as a systemd service is intended to provide an easy transition for those migrating from the init.d service implementation.</p>
<p>When running a yaf service for the first time, you must first modify the configuration file, <code>yaf.conf</code>, with relevant parameters for your intended use. If you are upgrading from a previous version of yaf, your configuration file will have persisted during the upgrade. The <code>yaf.conf</code> file is typically found in <code>/etc</code>.</p>
<blockquote class="doxtable">
<p>&zwj; <b>Note:</b> The <code>yaf.conf</code> configuration file in this document sets shell variables that are used when starting yaf, and the file is unrelated to the <a href="https://tools.netsa.cert.org/yaf2/yaf.init.html"><code>yaf.init</code></a> file, written in Lua, that is the argument to <code>yaf</code>'s <code>--config</code> option. </p>
</blockquote>
<p>Once the configuration file is completed, starting yaf as a service is the same as starting any other systemd service: </p><pre class="fragment"># systemctl start yaf.service
</pre><p> Checking the service's status and stopping the service are also typical: </p><pre class="fragment"># systemctl status yaf.service
</pre><p> and: </p><pre class="fragment"># systemctl stop yaf.service
</pre> <h2><a class="anchor" id="instantiated_services"></a><a href="#instantiated_services">
Instantiated Services</a></h2>
<p>With systemd functionality comes the ability to start a yaf service as an instance, with a unique configuration per instance.</p>
<p>To start YAF as an instantiated service, you must create a unique configuration file in the configuration file directory. The config file should be named <code>yaf.foo.conf</code> where <b>foo</b> is the name you want to give your instantiated service. Once this is done, you can start the instantiated service by passing your service name.</p>
<p>For example: </p><pre class="fragment"># systemctl start yaf@foo.service
</pre><p> starts an instantiated service using the configuration file yaf.foo.conf.</p>
<h1><a class="anchor" id="init_d"></a><a href="#init_d">
init.d</a></h1>
<p>For systems that do not support systemd, the init.d service script is still available, however this capability is not present when installing via rpm.</p>
<p>(For YAF 2.15.0 or earlier, the init.d capability is installed by the rpm and administrators should follow the instructions in this section.)</p>
<p>Running a yaf service using init.d is very similar to using systemd. The <code>yaf.conf</code> configuration file must be configured prior to first use with the parameters you want the service to use. The configuration file is typically located in <code>/etc</code>.</p>
<p>Once your configuration file is complete, you can start the yaf service using the following command: </p><pre class="fragment"># service yaf start
</pre><p> You can stop the service or check its status using: </p><pre class="fragment"># service yaf stop
</pre><p> and </p><pre class="fragment"># service yaf status
</pre><p> The init.d service has one additional feature that does not exist in systemd: dumpstats. This sends a signal to the service telling it write its collection statistics to the yaf log, and the service continues to run. The command has no effect if yaf is not running. It can be called using the command: </p><pre class="fragment"># service yaf dumpstats
</pre><p> One can mimic the <a class="el" href="#instantiated_services">instantiated services</a> of systemd by creating a configuration file <code>/etc/yaf-foo.conf</code> and either copying or linking <code>/etc/init.d/yaf</code> to <code>/etc/init.d/yaf-foo</code>. </p><pre class="fragment"># ln /etc/init.d/yaf /etc/init.d/yaf-foo
</pre><p> Running </p><pre class="fragment"># service yaf-foo start
</pre><p> will use the configuration settings in <code>/etc/yaf-foo.conf</code>. This approach should only be used on systems which do not support systemd, and it is not forward-compatible with systemd. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</body>
</html>

